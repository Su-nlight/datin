import csv

def get_csv_fields_and_save(input_file_path, output_file_path):
    excluded_fields = [
        'verified', 
        'date_added', 
        'date_updated',
        'screenshot_url', 
        'application_url', 
        'source_url'
    ]
    
    try:
        with open(input_file_path, 'r', encoding='utf-8') as csv_file:

            csv_reader = csv.reader(csv_file)
            
            try:
                header = next(csv_reader)

                fields = [field for field in header if field not in excluded_fields]
                
                with open(output_file_path, 'w', encoding='utf-8', newline='') as output_file:
                    csv_writer = csv.writer(output_file)
                
                    csv_writer.writerow(fields)
                
                return fields
                
            except StopIteration:
             
                return []
    except Exception as e:
        print(f"Error: {e}")
        return []

if __name__ == "__main__":
    input_file_path = "files_exploits.csv"  
    output_file_path = "fields_exploits.csv"  
    fields = get_csv_fields_and_save(input_file_path, output_file_path)
    print("CSV Fields (excluding specified ones):")
    print(fields)
    print(f"Fields list has been saved to {output_file_path}")
